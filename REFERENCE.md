# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

#### Public Classes

* [`strongswan`](#strongswan): Installs and manages strongSwan
* [`strongswan::pki::ca`](#strongswan--pki--ca): This class manages the Strongswan CA
* [`strongswan::setup`](#strongswan--setup): Manages the Strongswan 'setup' section in ipsec.conf

#### Private Classes

* `strongswan::config`: Manages Strongswan basic configuration
* `strongswan::package`: This class manages Strongswan package installation
* `strongswan::params`: Operating specific default parameters
* `strongswan::service`: This class manages the Strongswan service

### Defined types

* [`strongswan::charon`](#strongswan--charon): Manage strongswan charon config files
* [`strongswan::charon::plugin`](#strongswan--charon--plugin): Configure charon plugin
* [`strongswan::conn`](#strongswan--conn): Configure a strongSwan connection configuration.
* [`strongswan::pki::certificate`](#strongswan--pki--certificate): Manage strongswan certificates
* [`strongswan::secrets`](#strongswan--secrets): strongSwan secrets configuration.

## Classes

### <a name="strongswan"></a>`strongswan`

Installs and manages strongSwan

#### Parameters

The following parameters are available in the `strongswan` class:

* [`package_name`](#-strongswan--package_name)
* [`package_ensure`](#-strongswan--package_ensure)
* [`service_name`](#-strongswan--service_name)
* [`service_ensure`](#-strongswan--service_ensure)
* [`service_enable`](#-strongswan--service_enable)
* [`ipsec_d_dir`](#-strongswan--ipsec_d_dir)
* [`ipsec_conf`](#-strongswan--ipsec_conf)
* [`ipsec_secrets`](#-strongswan--ipsec_secrets)
* [`charon_conf`](#-strongswan--charon_conf)

##### <a name="-strongswan--package_name"></a>`package_name`

Data type: `Any`

The strongswan package name.

Default value: `'strongswan'`

##### <a name="-strongswan--package_ensure"></a>`package_ensure`

Data type: `Any`

The desired package state. Can be used to install `latest` or a specific version etc.

Default value: `'installed'`

##### <a name="-strongswan--service_name"></a>`service_name`

Data type: `Any`

The strongswan service name.

Default value: `$strongswan::params::service_name`

##### <a name="-strongswan--service_ensure"></a>`service_ensure`

Data type: `Any`

The desired `ensure` state for the service.

Default value: `running`

##### <a name="-strongswan--service_enable"></a>`service_enable`

Data type: `Any`

The desired `enable` state for the service.

Default value: `true`

##### <a name="-strongswan--ipsec_d_dir"></a>`ipsec_d_dir`

Data type: `Any`

The directory for the ipsec configuration files.  The default is operating system specific and you should not need to override this setting.

Default value: `$strongswan::params::ipsec_d_dir`

##### <a name="-strongswan--ipsec_conf"></a>`ipsec_conf`

Data type: `Any`

The location of the `ipsec.conf` file. The default is operating system specific and you should not need to override this setting.

Default value: `$strongswan::params::ipsec_conf`

##### <a name="-strongswan--ipsec_secrets"></a>`ipsec_secrets`

Data type: `Any`

The location of the `ipsec.secrets` file. The default is operating system specific and you should not need to override this setting.

Default value: `$strongswan::params::ipsec_secrets`

##### <a name="-strongswan--charon_conf"></a>`charon_conf`

Data type: `Any`

The location of the main `charon.conf` config file. WARNING, this option is not currently used.

Default value: `$strongswan::params::charon_conf`

### <a name="strongswan--pki--ca"></a>`strongswan::pki::ca`

This class manages the Strongswan CA

#### Examples

##### Default CA configuration

```puppet
include strongswan::pki::ca
```

##### Configure the CA with custom options

```puppet
class {'strongswan::pki::ca':
  $common_name  => 'myVPN',
  $country_code => 'XX',
  $organization => 'myOrg',
}
```

#### Parameters

The following parameters are available in the `strongswan::pki::ca` class:

* [`common_name`](#-strongswan--pki--ca--common_name)
* [`country_code`](#-strongswan--pki--ca--country_code)
* [`organization`](#-strongswan--pki--ca--organization)

##### <a name="-strongswan--pki--ca--common_name"></a>`common_name`

Data type: `String[1]`

The Certificate Authority `Common Name (CN)`

Default value: `'strongswanCA'`

##### <a name="-strongswan--pki--ca--country_code"></a>`country_code`

Data type: `String[2]`

The Certificate Authority `Country Code (C)`

Default value: `'GB'`

##### <a name="-strongswan--pki--ca--organization"></a>`organization`

Data type: `String[1]`

The Certificate Authority `Organization (O)`

Default value: `'Strongswan'`

### <a name="strongswan--setup"></a>`strongswan::setup`

Manages the Strongswan 'setup' section in ipsec.conf

#### Examples

##### Sample Usage

```puppet
class { 'strongswan::setup':
  options => {
    'strictcrlpolicy' => 'yes',
    'uniqueids'       => 'never',
    }
  }
}
```

#### Parameters

The following parameters are available in the `strongswan::setup` class:

* [`options`](#-strongswan--setup--options)

##### <a name="-strongswan--setup--options"></a>`options`

Data type: `Hash`

The hash of options to configure

Default value: `{}`

## Defined types

### <a name="strongswan--charon"></a>`strongswan::charon`

Manage strongswan charon config files

#### Examples

##### Define file loggers in charon_log.conf file

```puppet
strongswan::charon { 'log':
  options => {
    'filelog' => {
      '/var/log/strongswan.log' => {
        'time_format' => '%b %e %T',
        'ike_name'    => 'yes',
        'append'      => 'no',
        'default'     => '1',
        'flush_line'  => 'yes',
      },
      'stderr' => {
        'ike' => '2',
        'knl' => '2',
      },
    },
  },
}
```

#### Parameters

The following parameters are available in the `strongswan::charon` defined type:

* [`options`](#-strongswan--charon--options)

##### <a name="-strongswan--charon--options"></a>`options`

Data type: `Hash`

charon options hash

Default value: `{}`

### <a name="strongswan--charon--plugin"></a>`strongswan::charon::plugin`

Configure charon plugin

#### Examples

##### enable plugin

```puppet
strongswan::charon::plugin { 'eap-radius':
  options => {
    'load'   => 'yes',
    'secret' => '$ecRet',
  }
}
```

##### disable plugin

```puppet
strongswan::charon::plugin { 'revocation':
  options => {
    'load' => 'no',
  }
}
```

#### Parameters

The following parameters are available in the `strongswan::charon::plugin` defined type:

* [`options`](#-strongswan--charon--plugin--options)

##### <a name="-strongswan--charon--plugin--options"></a>`options`

Data type: `Hash`

plugin configuration options

Default value: `{}`

### <a name="strongswan--conn"></a>`strongswan::conn`

@example Configure `IPsec-IKEv2` connection.
   strongswan::conn { 'IPsec-IKEv2':
     options => {
       'rekey'         => 'no',
       'left'          => '%any',
       'leftsubnet'    => '0.0.0.0/0',
       'leftcert'      => 'vpnHostCert.der',
       'right'         => '%any',
       'rightdns'      => '8.8.8.8,8.8.4.4',
       'rightsourceip' => '10.10.10.0/24',
       'auto'          => 'add',
     }
   }

 @example Configure `IKEv2-EAP` connection.
   strongswan::conn { 'IKEv2-EAP':
     options => {
       'also'          => 'IPSec-IKEv2',
       'leftauth'      => 'pubkey',
       'leftsendcert'  => 'always',
       'rightauth'     => 'eap-mschapv2',
       'rightsendcert' => 'never',
       'eap_identity'  => '%any',
     }

#### Examples

##### Configure defaults for other connections

```puppet
strongswan::conn { '%default':
  options => {
    'ike'         => 'aes128gcm128-prfsha256-ecp256!',
    'esp'         => 'aes128gcm128-ecp256!',
    'keyexchange' => 'ikev2',
    'ikelifetime' => '60m',
    'lifetime'    => '20m',
    'margintime'  => '3m',
    'closeaction' => 'restart',
    'dpdaction'   => 'restart',
  }
}
```

#### Parameters

The following parameters are available in the `strongswan::conn` defined type:

* [`conn_name`](#-strongswan--conn--conn_name)
* [`options`](#-strongswan--conn--options)

##### <a name="-strongswan--conn--conn_name"></a>`conn_name`

Data type: `String[1]`

The name of the connection.

Default value: `$title`

##### <a name="-strongswan--conn--options"></a>`options`

Data type: `Hash`

A hash of configuration options for the connection.

Default value: `{}`

### <a name="strongswan--pki--certificate"></a>`strongswan::pki::certificate`

Manage strongswan certificates

#### Examples

##### Add a certificate

```puppet
strongswan::pki::certificate {'server':
  common_name => 'myvpn.local',
  san         => ['@strongswan-1','strongswan-1','192.168.33.42', '@192.168.33.42']
}
```

#### Parameters

The following parameters are available in the `strongswan::pki::certificate` defined type:

* [`common_name`](#-strongswan--pki--certificate--common_name)
* [`country_code`](#-strongswan--pki--certificate--country_code)
* [`organization`](#-strongswan--pki--certificate--organization)
* [`san`](#-strongswan--pki--certificate--san)
* [`p12_password`](#-strongswan--pki--certificate--p12_password)

##### <a name="-strongswan--pki--certificate--common_name"></a>`common_name`

Data type: `String[1]`

The certificate `Common Name (CN)`

Default value: `fact('fqdn')`

##### <a name="-strongswan--pki--certificate--country_code"></a>`country_code`

Data type: `String[2]`

The certificate `Country Code (C)`

Default value: `'GB'`

##### <a name="-strongswan--pki--certificate--organization"></a>`organization`

Data type: `String[1]`

The certificate `Organization (O)`

Default value: `'Strongswan'`

##### <a name="-strongswan--pki--certificate--san"></a>`san`

Data type: `Array[String[1]]`

An Array of `Subject Alternative Names`

Default value: `['localhost']`

##### <a name="-strongswan--pki--certificate--p12_password"></a>`p12_password`

Data type: `Optional[String[1]]`

An optional `PKCS#12` password for the certificate

Default value: `undef`

### <a name="strongswan--secrets"></a>`strongswan::secrets`

strongSwan secrets configuration.

* **See also**
  * https://linux.die.net/man/5/ipsec.secrets

#### Examples

##### Example 1

```puppet
strongswan::secrets { '%any':
  options => {
    'RSA' => 'vpnHostKey.der keypass'
  }
}
```

##### Example 2

```puppet
strongswan::secrets { 'John':
  options => {
    'EAP' => 'SuperSecretPass'
  }
}
```

#### Parameters

The following parameters are available in the `strongswan::secrets` defined type:

* [`selectors`](#-strongswan--secrets--selectors)
* [`options`](#-strongswan--secrets--options)

##### <a name="-strongswan--secrets--selectors"></a>`selectors`

Data type: `Array[String[1]]`

List of selectors for current secret

Default value: `[$title]`

##### <a name="-strongswan--secrets--options"></a>`options`

Data type: `Hash`

A hash of options to use with the secret

Default value: `{}`

